# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: damachad <damachad@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2023/04/17 10:57:36 by damachad          #+#    #+#              #
#    Updated: 2023/08/17 10:13:24 by damachad         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ COLORS /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
RESET	= \033[0m
BLACK 	= \033[1;30m
RED 	= \033[1;31m
GREEN 	= \033[1;32m
YELLOW 	= \033[1;33m
BLUE	= \033[1;34m
PURPLE 	= \033[1;35m
CYAN 	= \033[1;36m
WHITE 	= \033[1;37m

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ COMMANDS /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
CC = cc
RM = rm -rf

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_ FLAGS _/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
CFLAGS 	= -Wall -Werror -Wextra
MK_FLAG = --no-print-directory
LFLAGS 	= -L ./libft -lft

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_ PATHS _/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
INC			= includes
SRC_DIR		= srcs
OBJ_DIR		= objs

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_ FILES _/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
NAME 		= push_swap
LIBFT		= libft/libft.a
FILES 		= main validator operations operations2 sort clean \
			init stack cost
SRC 		= $(addprefix $(SRC_DIR)/, $(addsuffix .c, $(FILES)))
OBJ 		= $(addprefix $(OBJ_DIR)/, $(addsuffix .o, $(FILES)))

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_ ARGUMENTS _/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
NBRS_LIST = 74 199 131 328 104 35 13 178 113 385 336 269 308 46 23 430 339 402 76 92 316 85 217 118 143 68 209 300 295 170 340 225 177 149 52 258 123 181 458 4 329 22 333 39 169 442 357 349 112 315 278 370 424 490 457 325 320 106 310 61 98 31 58 133 459 482 117 309 69 321 249 465 5 160 433 235 362 337 96 125 410 150 126 63 306 108 2 444 335 397 183 78 383 206 103 268 257 100 317 436 228 163 332 59 205 435 33 376 87 462 400 124 224 146 26 164 426 434 366 485 274 489 253 75 414 379 492 1 93 162 194 488 193 34 144 54 289 399 445 326 494 356 30 127 355 95 374 425 345 154 114 238 500 56 418 229 185 431 299 302 381 338 215 189 454 237 115 361 8 273 318 221 47 391 449 139 101 312 354 231 203 480 499 334 387 71 348 365 197 466 107 240 233 298 359 42 116 219 256 25 423 159 463 137 281 142 373 487 296 138 453 48 212 62 171 70 175 120 216 261 393 292 134 437 452 429 324 246 476 204 202 290 368 464 254 471 14 105 468 232 38 152 94 456 184 343 279 248 314 200 367 473 190 415 477 176 211 327 352 180 51 448 475 251 472 491 10 493 20 378 227 172 207 99 262 484 307 351 304 422 286 409 135 347 179 45 24 53 60 198 438 331 287 372 168 467 404 11 130 91 432 247 451 151 210 311 6 145 301 40 264 214 455 267 342 293 285 244 369 201 469 43 447 192 406 86 427 394 371 428 330 161 218 128 417 440 186 245 37 443 353 97 242 7 446 260 90 323 419 50 208 72 230 252 388 398 119 498 167 153 358 102 156 129 195 65 17 481 294 439 363 243 313 121 259 497 3 319 407 174 265 84 28 148 288 236 450 132 341 88 483 222 36 173 291 157 360 136 122 392 220 49 73 408 375 266 241 384 191 412 64 140 109 234 280 364 377 421 19 441 226 55 147 479 111 416 18 380 32 386 15 110 141 389 239 495 275 21 382 213 411 486 395 16 77 255 155 496 165 82 405 277 12 80 79 223 460 270 271 196 297 305 322 166 41 187 346 390 303 284 66 44 474 396 478 470 250 188 401 158 276 67 282 9 350 89 420 81 27 403 263 461 413 57 182 283 344 272 29 83

# /\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_ RULES _/\_/\_/\_/\_/\_/\_/\_/\_/\_/\_/\ #
all: $(NAME)

$(NAME): $(OBJ_DIR) $(OBJ) $(LIBFT)
	@$(CC) $(CFLAGS) -g $(OBJ) $(LFLAGS) -o $(NAME) -I $(INC)
	@echo "[$(GREEN)$(NAME) created$(RESET)]"

$(OBJ_DIR)/%.o : $(SRC_DIR)/%.c 
	@$(CC) $(CFLAGS) -c $< -o $@ -I $(INC)

$(OBJ_DIR):
	@mkdir -p $(OBJ_DIR)
	@echo "[$(GREEN)objs directory created$(RESET)]"

$(LIBFT):
	@make $(MK_FLAG) -C ./libft

clean:
	@$(RM) $(OBJ_DIR) $(OBJ_BNS_DIR)
	@make $(MK_FLAG) -C ./libft clean
	@echo "[$(RED)objs removed$(RESET)]"

fclean: clean
	@$(RM) $(NAME) $(NAME_BNS) $(LIBFT)
	@echo "[$(RED)executables and $(LIBFT) removed$(RESET)]"

re: fclean all

# valgrind --leak-check=full -s --show-leak-kinds=all --track-origins=yes

test: $(NAME)
	@./$(NAME) $(NBRS_LIST) | ./checker_linux $(NBRS_LIST)

count: $(NAME)
	@./$(NAME) $(NBRS_LIST) | wc -l

output: $(NAME)
	@$(RM) output.txt
	@./$(NAME) $(NBRS_LIST) > output.txt

debug: re
	@gdb --args $(NAME) $(NBRS_LIST)

.PHONY: all clean fclean re test count
